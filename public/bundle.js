!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvasWidth=400,this.canvasHeight=400,this.gridColor="rgba(0, 0, 0, .4)",this.gridSize=20,this.raf=!1};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=c(this,s(e).call(this))).canvas=document.getElementById("canvas"),t.canvas.setAttribute("width",t.canvasWidth+1+"px"),t.canvas.setAttribute("height",t.canvasHeight+1+"px"),t.ctx=t.canvas.getContext("2d"),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(r=[{key:"drawGrid",value:function(){for(var t,e,n=this,r=this.canvasWidth-this.gridSize,i=this.gridSize;i<=r;i+=this.gridSize){var o=i+.5;e=o,n.ctx.moveTo(e,0),n.ctx.lineTo(e,n.canvasHeight+.5),t=o,n.ctx.moveTo(0,t),n.ctx.lineTo(n.canvasWidth+.5,t),this.ctx.strokeStyle=this.gridColor,this.ctx.stroke()}}},{key:"isCanvasSupported",value:function(){return this.canvas.getContext}}])&&o(n.prototype,r),i&&o(n,i),e}(r);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=p(this,d(e).call(this))).canvas=document.getElementById("snake"),t.canvas.setAttribute("width",t.canvasWidth+1+"px"),t.canvas.setAttribute("height",t.canvasHeight+1+"px"),t.ctx=t.canvas.getContext("2d"),t.direction="up",t.chunks=[],t.speed=5,t.color="rgba(121, 169, 26, .7)",t.targetColor="rgba(82, 113, 20, 0.7)",t.targetPosition={x:0,y:0},t.getRandomDirection(),t.createChunks(2),t.initEvents(),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,t),n=e,(r=[{key:"drawSnake",value:function(){var t=this.chunks.length-1,e=this.chunks[t],n=this.gridSize+.5;this.ctx.clearRect(e.x-.2,e.y-.2,n,n),this.updateChunks();for(var r=0;r<this.chunks.length;r++){var i=this.chunks[r];this.ctx.fillStyle=this.color,this.ctx.fillRect(i.x,i.y,this.gridSize,this.gridSize)}}},{key:"createChunks",value:function(t){for(var e=this.getStartPosition(5),n=this.isVerticalDirection(),r=0;r<t;r++){var i=e.x,o=e.y;n?o-=r*this.gridSize:i-=r*this.gridSize,this.chunks.push({x:i,y:o})}}},{key:"updateChunks",value:function(){for(var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(n,!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.chunks[0]),e=[t=this.newChunkPosition(t)],n=this.chunks.length,r=1;r<n;r++)e.push(this.chunks[r-1]);this.chunks=e}},{key:"newChunkPosition",value:function(t){return this.isVerticalDirection()?["up","left"].indexOf(this.direction)>=0?t.y-=this.gridSize:t.y+=this.gridSize:["up","left"].indexOf(this.direction)>=0?t.x-=this.gridSize:t.x+=this.gridSize,t}},{key:"getRandomDirection",value:function(){var t=["up","down","left","right"],e=Math.floor(Math.random()*t.length);this.direction=t[e]}},{key:"searchTarget",value:function(){var t=this.chunks[0];return t.x===this.targetPosition.x&&t.y===this.targetPosition.y&&(this.addChunk(),this.drawTarget(),this.incrementSpeed(),!0)}},{key:"addChunk",value:function(){var t=this.chunks[this.chunks.length-2],e=this.chunks[this.chunks.length-1],n=Object.assign({},e);this.isVerticalDirection()?"right"===this.direction?e.x!==t.x&&(n.x-=this.gridSize):"left"===this.direction?e.x!==t.x&&(n.x+=this.gridSize):"up"===this.direction?e.y!==t.y&&(n.y+=this.gridSize):"down"===this.direction&&e.y!==t.y&&(n.y-=this.gridSize):"right"===this.direction?e.x!==t.x&&(n.x-=this.gridSize):"left"===this.direction?e.x!==t.x&&(n.x+=this.gridSize):"up"===this.direction?e.y!==t.y&&(n.y-=this.gridSize):"down"===this.direction&&e.y!==t.y&&(n.y+=this.gridSize),this.chunks.push(n)}},{key:"drawTarget",value:function(){var t=this;if(this.targetPosition=this.getStartPosition(1,this.gridSize,this.canvasWidth),this.chunks.some((function(e){return e.x===t.targetPosition.x&&e.y===t.targetPosition.y})))return this.drawTarget();this.ctx.fillStyle=this.targetColor,this.ctx.fillRect(this.targetPosition.x,this.targetPosition.y,this.gridSize,this.gridSize)}},{key:"isVerticalDirection",value:function(){return["up","down"].indexOf(this.direction)>=0}},{key:"incrementSpeed",value:function(){this.speed+=.5}},{key:"getStartPosition",value:function(t){var e=this.gridSize*t,n=Math.floor(Math.random()*(this.canvasWidth-2*e)+e);n-=n%this.gridSize;var r=Math.floor(Math.random()*(this.canvasWidth-2*e)+e);return{x:n+.5,y:.5+(r-=r%this.gridSize)}}},{key:"initEvents",value:function(){document.addEventListener("keydown",this.keyDownListener.bind(this))}},{key:"keyDownListener",value:function(t){switch(t.which){case 37:if("right"===this.direction)return!1;this.direction="left";break;case 38:if("down"===this.direction)return!1;this.direction="up";break;case 39:if("left"===this.direction)return!1;this.direction="right";break;case 40:if("up"===this.direction)return!1;this.direction="down"}}}])&&y(n.prototype,r),i&&y(n,i),e}(r);function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scoreElement=document.getElementById("score"),this.scoreElement.innerHTML="0"}var e,n,r;return e=t,(n=[{key:"incrementScore",value:function(){this.scoreElement.innerHTML=parseInt(this.scoreElement.innerText)+1}}])&&g(e.prototype,n),r&&g(e,r),t}();function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,O(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,t),n=e,(r=[{key:"isGameOver",value:function(t){return this.wentAbroad(t)||this.runOverHimself(t)}},{key:"wentAbroad",value:function(t){return t.x<0||t.y<0||t.x>this.canvasWidth||t.y>this.canvasHeight}},{key:"runOverHimself",value:function(t){return!1}}])&&k(n.prototype,r),i&&k(n,i),e}(r);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=E(this,z(e).call(this))).init(),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){if(this.canvas=new u,!this.canvas.isCanvasSupported())return alert("Canvas is not supported");this.canvas.drawGrid(),this.toolbar=new m,this.gameOver=new P,this.snake=new v,this.snake.drawSnake(),this.snake.drawTarget(),this.move()}},{key:"move",value:function(){var t=this;if(this.snake.drawSnake(),this.gameOver.isGameOver(this.snake.chunks[0]))return this.wasted(),!1;this.snake.searchTarget()&&this.toolbar.incrementScore(),setTimeout((function(){t.raf=window.requestAnimationFrame(t.move.bind(t))}),1e3/this.snake.speed)}},{key:"wasted",value:function(){document.querySelector(".game-over").classList.add("active"),document.removeEventListener("keydown",this.snake.keyDownListener),window.cancelAnimationFrame(this.raf)}}])&&_(n.prototype,r),i&&_(n,i),e}(r);document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".game-start");t.addEventListener("click",(function(){t.classList.add("hide"),new C}));var e=document.querySelector(".game-over");e.addEventListener("click",(function(){e.classList.remove("active"),t.click()}))}))}]);
//# sourceMappingURL=bundle.js.map