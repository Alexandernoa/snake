!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvasWidth=400,this.canvasHeight=400,this.gridColor="rgba(0, 0, 0, .4)",this.gridSize=20,this.raf=!1};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=c(this,s(e).call(this))).canvas=document.getElementById("canvas"),t.canvas.setAttribute("width",t.canvasWidth+1+"px"),t.canvas.setAttribute("height",t.canvasHeight+1+"px"),t.ctx=t.canvas.getContext("2d"),t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(i=[{key:"drawGrid",value:function(){for(var t,e,n=this,i=this.canvasWidth-this.gridSize,r=this.gridSize;r<=i;r+=this.gridSize){var o=r+.5;e=o,n.ctx.moveTo(e,0),n.ctx.lineTo(e,n.canvasHeight+.5),t=o,n.ctx.moveTo(0,t),n.ctx.lineTo(n.canvasWidth+.5,t),this.ctx.strokeStyle=this.gridColor,this.ctx.stroke()}}},{key:"isCanvasSupported",value:function(){return this.canvas.getContext}}])&&o(n.prototype,i),r&&o(n,r),e}(i);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=d(this,p(e).call(this))).canvas=document.getElementById("snake"),t.canvas.setAttribute("width",t.canvasWidth+1+"px"),t.canvas.setAttribute("height",t.canvasHeight+1+"px"),t.ctx=t.canvas.getContext("2d"),t.direction="up",t.chunks=[],t.speed=5,t.color="rgba(121, 169, 26, .7)",t.targetColor="rgba(82, 113, 20, 0.7)",t.targetPosition={x:0,y:0},t.getRandomDirection(),t.createChunks(2),t.initEvents(),t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,t),n=e,(i=[{key:"drawSnake",value:function(){var t=this.chunks.length-1,e=this.chunks[t],n=this.gridSize+.5;this.ctx.clearRect(e.x-.2,e.y-.2,n,n),this.updateChunks();for(var i=0;i<this.chunks.length;i++){var r=this.chunks[i];this.ctx.fillStyle=this.color,this.ctx.fillRect(r.x,r.y,this.gridSize,this.gridSize)}}},{key:"createChunks",value:function(t){for(var e=this.getStartPosition(5),n=this.isVerticalDirection(),i=0;i<t;i++){var r=e.x,o=e.y;n?o-=i*this.gridSize:r-=i*this.gridSize,this.chunks.push({x:r,y:o})}}},{key:"updateChunks",value:function(){for(var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(n,!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.chunks[0]),e=[t=this.newChunkPosition(t)],n=this.chunks.length,i=1;i<n;i++)e.push(this.chunks[i-1]);this.chunks=e}},{key:"newChunkPosition",value:function(t){return this.isVerticalDirection()?["up","left"].indexOf(this.direction)>=0?t.y-=this.gridSize:t.y+=this.gridSize:["up","left"].indexOf(this.direction)>=0?t.x-=this.gridSize:t.x+=this.gridSize,t}},{key:"getRandomDirection",value:function(){var t=["up","down","left","right"],e=Math.floor(Math.random()*t.length);this.direction=t[e]}},{key:"searchTarget",value:function(){var t=this.chunks[0];return t.x===this.targetPosition.x&&t.y===this.targetPosition.y&&(this.addChunk(),this.drawTarget(),this.incrementSpeed(),!0)}},{key:"addChunk",value:function(){var t=this.chunks[this.chunks.length-2],e=this.chunks[this.chunks.length-1],n=Object.assign({},e);this.isVerticalDirection()?"right"===this.direction?e.x!==t.x&&(n.x-=this.gridSize):"left"===this.direction?e.x!==t.x&&(n.x+=this.gridSize):"up"===this.direction?e.y!==t.y&&(n.y+=this.gridSize):"down"===this.direction&&e.y!==t.y&&(n.y-=this.gridSize):"right"===this.direction?e.x!==t.x&&(n.x-=this.gridSize):"left"===this.direction?e.x!==t.x&&(n.x+=this.gridSize):"up"===this.direction?e.y!==t.y&&(n.y-=this.gridSize):"down"===this.direction&&e.y!==t.y&&(n.y+=this.gridSize),this.chunks.push(n)}},{key:"drawTarget",value:function(){var t=this;if(this.targetPosition=this.getStartPosition(1),this.chunks.some((function(e){return e.x===t.targetPosition.x&&e.y===t.targetPosition.y})))return this.drawTarget();this.ctx.fillStyle=this.targetColor,this.ctx.fillRect(this.targetPosition.x,this.targetPosition.y,this.gridSize,this.gridSize)}},{key:"isVerticalDirection",value:function(){return["up","down"].indexOf(this.direction)>=0}},{key:"incrementSpeed",value:function(){this.speed+=.5}},{key:"getStartPosition",value:function(t){var e=this.gridSize*t,n=Math.floor(Math.random()*(this.canvasWidth-2*e)+e);n-=n%this.gridSize;var i=Math.floor(Math.random()*(this.canvasWidth-2*e)+e);return{x:n+.5,y:.5+(i-=i%this.gridSize)}}},{key:"initEvents",value:function(){document.addEventListener("keydown",this.keyDownListener.bind(this)),window.innerWidth&&(document.querySelector(".btn-left").addEventListener("click",this.goLeft.bind(this)),document.querySelector(".btn-up").addEventListener("click",this.goUp.bind(this)),document.querySelector(".btn-right").addEventListener("click",this.goRight.bind(this)),document.querySelector(".btn-down").addEventListener("click",this.goDown.bind(this)))}},{key:"keyDownListener",value:function(t){switch(t.which){case 37:return this.goLeft();case 38:return this.goUp();case 39:return this.goRight();case 40:return this.goDown()}}},{key:"goLeft",value:function(){if("right"===this.direction)return!1;this.direction="left"}},{key:"goUp",value:function(){if("down"===this.direction)return!1;this.direction="up"}},{key:"goRight",value:function(){if("left"===this.direction)return!1;this.direction="right"}},{key:"goDown",value:function(){if("up"===this.direction)return!1;this.direction="down"}}])&&y(n.prototype,i),r&&y(n,r),e}(i);function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scoreElement=document.getElementById("score"),this.scoreElement.innerHTML="0"}var e,n,i;return e=t,(n=[{key:"incrementScore",value:function(){this.scoreElement.innerHTML=parseInt(this.scoreElement.innerText)+1}}])&&g(e.prototype,n),i&&g(e,i),t}();function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,O(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,t),n=e,(i=[{key:"isGameOver",value:function(t){return this.wentAbroad(t)||this.runOverHimself(t)}},{key:"wentAbroad",value:function(t){return t.x<0||t.y<0||t.x>this.canvasWidth||t.y>this.canvasHeight}},{key:"runOverHimself",value:function(t){return!1}}])&&k(n.prototype,i),r&&k(n,r),e}(i);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=E(this,z(e).call(this))).init(),t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,t),n=e,(i=[{key:"init",value:function(){if(this.canvas=new a,!this.canvas.isCanvasSupported())return alert("Canvas is not supported");this.canvas.drawGrid(),this.toolbar=new m,this.gameOver=new P,this.snake=new b,this.snake.drawSnake(),this.snake.drawTarget(),this.move()}},{key:"move",value:function(){var t=this;if(this.snake.drawSnake(),this.gameOver.isGameOver(this.snake.chunks[0]))return this.wasted(),!1;this.snake.searchTarget()&&this.toolbar.incrementScore(),setTimeout((function(){t.raf=window.requestAnimationFrame(t.move.bind(t))}),1e3/this.snake.speed)}},{key:"wasted",value:function(){document.querySelector(".game-over").classList.add("active"),document.removeEventListener("keydown",this.snake.keyDownListener),window.cancelAnimationFrame(this.raf)}}])&&_(n.prototype,i),r&&_(n,r),e}(i);document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".game-start");t.addEventListener("click",(function(){t.classList.add("hide"),new C}));var e=document.querySelector(".game-over");e.addEventListener("click",(function(){e.classList.remove("active"),t.click()}))}))}]);
//# sourceMappingURL=bundle.js.map