{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js"],"names":["App","initApp","drawCanvasGrid","getRandomDirection","position","getStartPosition","createChunks","move","drawLostChunk","prototype","initSettings","initEvents","initCanvas","initSnake","initTarget","initToolbar","canvas","document","getElementById","snake","target","scoreElement","settings","canvasWidth","canvasHeight","borderColor","gridColor","gridSize","steps","direction","chunks","speed","color","lostChunk","x","y","setAttribute","getContext","alert","ctx","snakeCtx","targetCtx","innerHTML","incrementScore","score","parseInt","incrementSpeed","window","addEventListener","keyDownListener","bind","e","keyCode","drawVerticalLine","moveTo","lineTo","drawHorizontalLine","iEqual","i","call","strokeStyle","stroke","verticalDirection","isVerticalDirection","push","updateChunks","head","Object","assign","chunkPosition","isGameOver","chunkLength","length","addChunk","preLastChunk","lastChunk","newChunk","indexOf","gameOver","querySelector","classList","add","removeEventListener","wentAbroad","runOverHimself","Math","round","drawSnake","searchLostChunk","setTimeout","requestAnimationFrame","clearChunk","clearSize","clearRect","chunk","fillStyle","fillRect","size","duplicateSnakePosition","some","directions","index","floor","random","outPadding","padding","randomX","randomY","getNewPosition","app","reStart","remove"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","function App () {\r\n    this.initApp();\r\n\r\n    this.drawCanvasGrid();\r\n\r\n    this.getRandomDirection();\r\n    const position = this.getStartPosition(5);\r\n\r\n    this.createChunks(position);\r\n    this.move();\r\n\r\n    this.drawLostChunk();\r\n}\r\n\r\nApp.prototype.initApp = function () {\r\n    this.initSettings();\r\n    this.initEvents();\r\n    this.initCanvas();\r\n    this.initSnake();\r\n    this.initTarget();\r\n    this.initToolbar();\r\n}\r\n\r\nApp.prototype.initSettings = function () {\r\n    this.canvas = document.getElementById('canvas');\r\n    this.snake = document.getElementById('snake');\r\n    this.target = document.getElementById('target');\r\n    this.scoreElement = document.getElementById('score');\r\n\r\n    this.settings = {\r\n        canvasWidth: 400,\r\n        canvasHeight: 400,\r\n        borderColor: 'rgb(156, 156, 156)',\r\n        gridColor: 'rgba(0, 0, 0, .4)',\r\n        gridSize: 20,\r\n        steps: [],\r\n        snake: {\r\n            direction: 'up',\r\n            chunks: [],\r\n            speed: 5,\r\n            color: 'rgba(121, 169, 26, .7)'\r\n        },\r\n        lostChunk: {\r\n            position: { x: 0, y: 0 },\r\n            color: 'rgba(82, 113, 20, 0.7)'\r\n        }\r\n    };\r\n}\r\n\r\nApp.prototype.initCanvas = function () {\r\n    this.canvas.setAttribute('width', this.settings.canvasWidth + 1 + 'px');\r\n    this.canvas.setAttribute('height', this.settings.canvasHeight + 1 + 'px');\r\n\r\n    if (!this.canvas.getContext) {\r\n        alert('Canvas is not supported');\r\n        return false;\r\n    }\r\n\r\n    this.ctx = this.canvas.getContext('2d');\r\n}\r\n\r\nApp.prototype.initSnake = function () {\r\n    this.snake.setAttribute('width', this.settings.canvasWidth + 1 + 'px');\r\n    this.snake.setAttribute('height', this.settings.canvasHeight + 1 + 'px');\r\n    this.snakeCtx = this.snake.getContext('2d');\r\n}\r\n\r\nApp.prototype.initTarget = function () {\r\n    this.target.setAttribute('width', this.settings.canvasWidth + 1 + 'px');\r\n    this.target.setAttribute('height', this.settings.canvasHeight + 1 + 'px');\r\n    this.targetCtx = this.snake.getContext('2d');\r\n}\r\n\r\nApp.prototype.initToolbar = function () {\r\n    this.scoreElement.innerHTML = 0;\r\n}\r\n\r\nApp.prototype.incrementScore = function () {\r\n    let score = parseInt(this.scoreElement.innerHTML) + 1;\r\n    this.scoreElement.innerHTML = score;\r\n}\r\n\r\nApp.prototype.incrementSpeed = function () {\r\n    this.settings.snake.speed += 0.5;\r\n}\r\n\r\nApp.prototype.initEvents = function () {\r\n    window.addEventListener('keydown', this.keyDownListener.bind(this));\r\n}\r\n\r\nApp.prototype.keyDownListener = function (e) {\r\n    switch (e.keyCode) {\r\n        case 37:\r\n            if (this.settings.snake.direction === 'right') return false;\r\n            this.settings.snake.direction = 'left';\r\n            break;\r\n        case 38:\r\n            if (this.settings.snake.direction === 'down') return false;\r\n            this.settings.snake.direction = 'up';\r\n            break;\r\n        case 39:\r\n            if (this.settings.snake.direction === 'left') return false;\r\n            this.settings.snake.direction = 'right';\r\n            break;\r\n        case 40:\r\n            if (this.settings.snake.direction === 'up') return false;\r\n            this.settings.snake.direction = 'down';\r\n            break;\r\n    }\r\n}\r\n\r\nApp.prototype.drawCanvasGrid = function () {\r\n    function drawVerticalLine (x) {\r\n        this.ctx.moveTo(x, 0);\r\n        this.ctx.lineTo(x, this.settings.canvasHeight + 0.5);\r\n    }\r\n\r\n    function drawHorizontalLine (y) {\r\n        this.ctx.moveTo(0, y);\r\n        this.ctx.lineTo(this.settings.canvasWidth + 0.5, y);\r\n    }\r\n\r\n    const iEqual = this.settings.canvasWidth - this.settings.gridSize\r\n    for (let i = this.settings.gridSize; i <= iEqual; i += this.settings.gridSize) {\r\n        drawVerticalLine.call(this, i + 0.5);\r\n        drawHorizontalLine.call(this, i + 0.5);\r\n        this.ctx.strokeStyle = this.settings.gridColor;\r\n        this.ctx.stroke();\r\n    }\r\n}\r\n\r\nApp.prototype.createChunks = function (position) {\r\n    const verticalDirection = this.isVerticalDirection();\r\n    for (let i = 0; i < 2; i++) {\r\n        let x = position.x;\r\n        let y = position.y;\r\n        if (verticalDirection) {\r\n            y -= i * this.settings.gridSize;\r\n        } else {\r\n            x -= i * this.settings.gridSize;\r\n        }\r\n        this.settings.snake.chunks.push({ x: x, y: y })\r\n    }\r\n}\r\n\r\nApp.prototype.updateChunks = function () {\r\n    let head = Object.assign({}, this.settings.snake.chunks[0]);\r\n    head = this.chunkPosition(head);\r\n\r\n    this.isGameOver(head);\r\n\r\n    let chunks = [head];\r\n\r\n    const chunkLength = this.settings.snake.chunks.length;\r\n    for (let i = 1; i < chunkLength; i++) {\r\n        chunks.push(this.settings.snake.chunks[i-1]);\r\n    }\r\n\r\n    this.settings.snake.chunks = chunks;\r\n}\r\n\r\nApp.prototype.addChunk = function () {\r\n    const preLastChunk = this.settings.snake.chunks[this.settings.snake.chunks.length - 2];\r\n    const lastChunk = this.settings.snake.chunks[this.settings.snake.chunks.length - 1];\r\n    const newChunk = Object.assign({}, lastChunk);\r\n\r\n    const verticalDirection = this.isVerticalDirection();\r\n\r\n    if (verticalDirection) {\r\n        if (this.settings.snake.direction === 'right') {\r\n            if (lastChunk.x !== preLastChunk.x) { newChunk.x -= this.settings.gridSize; }\r\n        } else if (this.settings.snake.direction === 'left') {\r\n            if (lastChunk.x !== preLastChunk.x) { newChunk.x += this.settings.gridSize; }\r\n        } else if (this.settings.snake.direction === 'up') {\r\n            if (lastChunk.y !== preLastChunk.y) { newChunk.y += this.settings.gridSize; }\r\n        } else if (this.settings.snake.direction === 'down') {\r\n            if (lastChunk.y !== preLastChunk.y) { newChunk.y -= this.settings.gridSize; }\r\n        }\r\n    } else {\r\n        if (this.settings.snake.direction === 'right') {\r\n            if (lastChunk.x !== preLastChunk.x) { newChunk.x -= this.settings.gridSize; }\r\n        } else if (this.settings.snake.direction === 'left') {\r\n            if (lastChunk.x !== preLastChunk.x) { newChunk.x += this.settings.gridSize; }\r\n        } else if (this.settings.snake.direction === 'up') {\r\n            if (lastChunk.y !== preLastChunk.y) { newChunk.y -= this.settings.gridSize; }\r\n        } else if (this.settings.snake.direction === 'down') {\r\n            if (lastChunk.y !== preLastChunk.y) { newChunk.y += this.settings.gridSize; }\r\n        }\r\n    }\r\n\r\n    this.settings.snake.chunks.push(newChunk);\r\n    this.incrementScore();\r\n    this.incrementSpeed();\r\n}\r\n\r\nApp.prototype.chunkPosition = function (head) {\r\n    const verticalDirection = this.isVerticalDirection();\r\n\r\n    if (verticalDirection) {\r\n        if (['up', 'left'].indexOf(this.settings.snake.direction) >= 0)  head.y -= this.settings.gridSize;\r\n        else head.y += this.settings.gridSize;\r\n    } else {\r\n        if (['up', 'left'].indexOf(this.settings.snake.direction) >= 0)  head.x -= this.settings.gridSize;\r\n        else head.x += this.settings.gridSize;\r\n    }\r\n\r\n    return head;\r\n}\r\n\r\nApp.prototype.gameOver = function () {\r\n    document.querySelector('.game-over').classList.add(\"active\");\r\n    window.removeEventListener('keydown', this.keyDownListener);\r\n}\r\n\r\nApp.prototype.isGameOver = function (head) {\r\n    if (this.wentAbroad(head) || this.runOverHimself(head)) {\r\n        this.gameOver();\r\n    }\r\n}\r\n\r\nApp.prototype.wentAbroad = function (head) {\r\n    return head.x < 0 || head.y < 0 || head.x > this.settings.canvasWidth || head.y > this.settings.canvasHeight;\r\n}\r\n\r\nApp.prototype.runOverHimself = function (head) {\r\n    return false;\r\n    // return this.settings.snake.chunks.some(function (chunk, i) {\r\n    //   return i > 2 && (chunk.x === head.x && chunk.y === head.y);\r\n    // });\r\n}\r\n\r\nApp.prototype.move = function () {\r\n    const speed = Math.round(1000 / this.settings.snake.speed);\r\n    this.drawSnake();\r\n    this.searchLostChunk();\r\n\r\n    setTimeout((function() {\r\n        window.requestAnimationFrame(this.move.bind(this));\r\n    }).bind(this), speed);\r\n}\r\n\r\nApp.prototype.searchLostChunk = function () {\r\n    const head = this.settings.snake.chunks[0];\r\n    const lostChunk = this.settings.lostChunk.position;\r\n    if (head.x !== lostChunk.x || head.y !== lostChunk.y) {\r\n        return false;\r\n    }\r\n    this.addChunk();\r\n    this.drawLostChunk();\r\n}\r\n\r\nApp.prototype.drawSnake = function () {\r\n    const length = this.settings.snake.chunks.length - 1;\r\n    const clearChunk = this.settings.snake.chunks[length];\r\n    const clearSize = this.settings.gridSize + 0.5;\r\n    this.snakeCtx.clearRect(clearChunk.x - 0.2, clearChunk.y - 0.2, clearSize, clearSize);\r\n\r\n    this.updateChunks();\r\n\r\n    for (let i = 0; i < this.settings.snake.chunks.length; i++) {\r\n        const chunk = this.settings.snake.chunks[i];\r\n        this.snakeCtx.fillStyle = this.settings.snake.color;\r\n        this.snakeCtx.fillRect(chunk.x, chunk.y, this.settings.gridSize, this.settings.gridSize);\r\n    }\r\n}\r\n\r\nApp.prototype.drawLostChunk = function () {\r\n    this.targetCtx.fillStyle = this.settings.lostChunk.color;\r\n    const size = this.settings.gridSize;\r\n    const position = this.getStartPosition();\r\n    this.settings.lostChunk.position = position;\r\n\r\n    const duplicateSnakePosition = this.settings.snake.chunks.some(function (chunk) {\r\n        return chunk.x === position.x && chunk.y === position.y;\r\n    });\r\n\r\n    if (duplicateSnakePosition) {\r\n        return this.drawLostChunk();\r\n    }\r\n\r\n    this.targetCtx.fillRect(position.x, position.y, size, size);\r\n}\r\n\r\nApp.prototype.getRandomDirection = function () {\r\n    const directions = ['up', 'down', 'left', 'right'];\r\n    const index = Math.floor(Math.random() * directions.length);\r\n    this.settings.snake.direction = directions[index]\r\n}\r\n\r\nApp.prototype.isVerticalDirection = function () {\r\n    return ['up', 'down'].indexOf(this.settings.snake.direction) >= 0;\r\n}\r\n\r\nApp.prototype.getStartPosition = function (outPadding) {\r\n    const padding = this.settings.gridSize * (outPadding || 1);\r\n    let randomX = Math.floor(Math.random() * (this.settings.canvasWidth - padding * 2) + padding);\r\n    randomX = randomX - (randomX % this.settings.gridSize);\r\n\r\n    let randomY = Math.floor(Math.random() * (this.settings.canvasWidth - padding * 2) + padding);\r\n    randomY = randomY - (randomY % this.settings.gridSize);\r\n\r\n    // добавляем по + 0.5, чтобы визуально объект не выходил за рамку\r\n    return {\r\n        x: randomX + 0.5,\r\n        y: randomY + 0.5\r\n    }\r\n}\r\n\r\nApp.prototype.getNewPosition = function () {\r\n    const verticalDirection = this.isVerticalDirection();\r\n}\r\n\r\nfunction initApp () {\r\n    const app = new App();\r\n}\r\n\r\nfunction reStart () {\r\n    initApp();\r\n    document.querySelector('.game-over').classList.remove(\"active\");\r\n}\r\n\r\ninitApp();"],"sourceRoot":""}